<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Charges Dashboard</title>

    <!-- Chart.js + date adapter -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"
            integrity="sha512-/tWGeY3dY3kM6z0t6c7zO7bH3O6oF+9K2P6p9oJ2V8J5c5Y5X4zU5h5l5q5f5e5d5c5b5a5e5f5g5h5i5j5k5l5m5n5o5p=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-adapter-date-fns/3.0.0/chartjs-adapter-date-fns.bundle.min.js"></script>

    <style>
        :root {
            --bg: #FFF0F5;
            --panel: rgba(255,255,255,0.85);
            --primary: #FF69B4;      /* Hot pink – border / line */
            --fill: rgba(255,105,180,0.15);
            --accent: #FF1493;       /* Deep pink – points */
            --grid: rgba(0,0,0,0.08);
            --text: #333;
        }

        * { box-sizing: border-box; margin:0; padding:0; }
        body {
            background: var(--bg) url('https://static.vecteezy.com/system/resources/previews/051/865/495/non_2x/branch-with-cherry-blossoms-on-a-transparent-background-free-png.png') center/cover no-repeat;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            color: var(--text);
            min-height: 100vh;
        }

        .container { display:flex; height:100vh; }
        .left, .right { padding:1rem; }
        .left  { width:30%; background:var(--panel); border-right:1px solid #f0f0f0; overflow-y:auto; }
        .right { width:70%; background:var(--panel); display:flex; align-items:center; justify-content:center; }

        /* Table styling – clean, no AntD dependency */
        table { width:100%; border-collapse:collapse; margin-top:0.5rem; }
        th, td { padding:0.5rem; text-align:left; }
        th { background:#FFB6C1; font-weight:600; }
        input { width:100%; padding:0.35rem; border:1px solid #d9d9d9; border-radius:4px; }
        input:focus { border-color:var(--primary); outline:none; }

        summary { cursor:pointer; padding:0.75rem; background:#FFB6C1; border-radius:4px; font-weight:600; }

        /* Chart container */
        #chart-wrapper { width:100%; height:100%; max-height:80vh; }

        /* Responsive */
        @media (max-width: 768px) {
            .container { flex-direction:column; height:auto; }
            .left  { width:100%; order:2; }
            .right { width:100%; height:50vh; order:1; align-items:flex-start; }
        }
        @media (max-width: 768px) and (orientation: landscape) {
            .left { display:none; }
            .right { height:100vh; padding:0; }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="left">
        <details id="table-details" open>
            <summary>View / Edit Charges</summary>
            <table>
                <thead>
                <tr><th>Date</th><th>Charge</th></tr>
                </thead>
                <tbody id="data-table"></tbody>
            </table>
        </details>
    </div>

    <div class="right">
        <div id="chart-wrapper"><canvas id="chargeChart"></canvas></div>
    </div>
</div>

<script>
    // ------------------------------------------------------------------
    // 1. DATA
    // ------------------------------------------------------------------
    let data = [
        { date: '2025-01-01', charge: 37 },
        { date: '2025-02-01', charge: 35 },
        { date: '2025-03-01', charge: 28 },
        { date: '2025-04-01', charge: 25 },
        { date: '2025-05-01', charge: 28 },
        { date: '2025-06-01', charge: 24 },
        { date: '2025-07-01', charge: 22 },
        { date: '2025-08-01', charge: 19 },
        { date: '2025-09-01', charge: 14 },
        { date: '2025-10-01', charge: 12 }
    ];

    // ------------------------------------------------------------------
    // 2. TABLE RENDERING
    // ------------------------------------------------------------------
    const tbody = document.getElementById('data-table');

    function renderTable() {
        tbody.innerHTML = '';
        data.forEach((row, i) => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td><input type="date" value="${row.date}" onchange="updateDate(${i},this.value)"></td>
                <td><input type="number" min="0" step="0.01" value="${row.charge}" onchange="updateCharge(${i},this.value)"></td>
            `;
            tbody.appendChild(tr);
        });
    }

    window.updateDate   = (i, v) => { data[i].date   = v; updateChart(); };
    window.updateCharge = (i, v) => { data[i].charge = parseFloat(v) || 0; updateChart(); };

    // ------------------------------------------------------------------
    // 3. CHART (Area) – best-practice config
    // ------------------------------------------------------------------
    let chart = null;

    function createGradient(ctx, height) {
        const grad = ctx.createLinearGradient(0, 0, 0, height);
        grad.addColorStop(0, 'rgba(255,105,180,0.25)');
        grad.addColorStop(1, 'rgba(255,105,180,0.05)');
        return grad;
    }

    function updateChart() {
        const canvas = document.getElementById('chargeChart');
        const ctx    = canvas.getContext('2d');

        // ---- sort by date ------------------------------------------------
        data.sort((a,b) => new Date(a.date) - new Date(b.date));

        // ---- destroy previous instance -----------------------------------
        if (chart) chart.destroy();

        // ---- build new chart ---------------------------------------------
        chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: data.map(d => d.date),
                datasets: [{
                    label: 'Charges',
                    data: data.map(d => d.charge),

                    // ---- line & area styling ---------------------------------
                    borderColor: 'rgb(255,105,180)',           // hot pink
                    backgroundColor: (ctx) => {
                        const chart = ctx.chart;
                        const {ctx: c, data, chartArea} = chart;
                        if (!chartArea) return null;
                        return createGradient(c, chartArea.bottom);
                    },
                    fill: true,
                    tension: 0.25,            // smooth curve

                    // ---- point styling ---------------------------------------
                    pointBackgroundColor: '#FF1493',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointRadius: 5,
                    pointHoverRadius: 7
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: { duration: 750, easing: 'easeOutQuart' },

                interaction: { mode: 'index', intersect: false },

                plugins: {
                    legend: { display: true, position: 'top' },
                    tooltip: {
                        backgroundColor: 'rgba(0,0,0,0.75)',
                        titleColor: '#fff',
                        bodyColor: '#fff',
                        cornerRadius: 6,
                        displayColors: false
                    }
                },

                scales: {
                    x: {
                        type: 'time',
                        time: { unit: 'month', displayFormats: { month: 'MMM yyyy' } },
                        title: { display: true, text: 'Date', font: { weight: 'bold' } },
                        grid: { color: 'var(--grid)' }
                    },
                    y: {
                        title: { display: true, text: 'Charge', font: { weight: 'bold' } },
                        beginAtZero: true,
                        grid: { color: 'var(--grid)' },
                        ticks: { stepSize: 5 }
                    }
                }
            }
        });
    }

    // ------------------------------------------------------------------
    // 4. INITIALISATION
    // ------------------------------------------------------------------
    document.addEventListener('DOMContentLoaded', () => {
        renderTable();
        updateChart();

        // keep <details> open on wide screens
        const details = document.getElementById('table-details');
        const toggle = () => details.open = window.innerWidth > 768;
        toggle();
        window.addEventListener('resize', toggle);
    });
</script>
</body>
</html>
